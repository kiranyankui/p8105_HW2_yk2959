P8105 Homework 2
================
Kiran Kui
2022-10-05

## Load Libraries

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
    ## ✔ ggplot2 3.3.6     ✔ purrr   0.3.4
    ## ✔ tibble  3.1.8     ✔ dplyr   1.0.9
    ## ✔ tidyr   1.2.0     ✔ stringr 1.4.1
    ## ✔ readr   2.1.2     ✔ forcats 0.5.2
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

e want to read and clean the NYC transit dataset from the csv file.

``` r
NYC_transit <- read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names()

skimr::skim(NYC_transit)
```

Now, we want to retain the following variables:

-   line
-   station name
-   station latitude / longitude
-   routes served
-   entry
-   vending
-   entrance type
-   ADA compliance

``` r
select(NYC_transit, line, station_name, station_latitude, station_longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entry, vending, entrance_type, ada)

NYC_transit
```

Converting the entry variable into a logical vector.

``` r
recode(NYC_transit$entry, "YES"=TRUE,"NO"=FALSE, .default = NA)

NYC_transit
```

## Description about the NYC_transit dataset

1.  The dataset contains 32 columns (variables) and 1868 rows
    (observations).

2.  The variables from the dataset contains line, station_name,
    station_latitude, station_longitude, routes1 to 11, entry, vending,
    entrance_type, ada

division, line, station_name, routes, entrance type, entry, exit only,
vending, staffing, staff hours, ADA notes, north south street, east west
street, corner, station location, entrance location, ada, free
crossover, station lattitude and longitude, and entrance lattitude and
longitude.

3.  I read and clean object names using clean names () in janitor;
    retain line, station, name, station latitude / longitude, routes
    served, entry, vending, entrance type, and ADA compliance. Convert
    the entry variable from character (YES vs NO) to a logical variable

4.  The data are tidy.

Answer the following questions using these data:

-   How many distinct stations are there? Note that stations are
    identified both by name and by line (e.g. 125th St 8th Avenue; 125st
    Broadway; 125st Lenox); the distinct function may be useful here.

``` r
nrow(distinct(NYC_transit, station_name))
```

Ans: There are 356 distinct stations.

-   How many stations are ADA compliant?

``` r
NYC_transit %>% 
  select(station_name, ada) %>% 
  filter(ada == TRUE) %>%
  distinct(station_name)
```

Ans: There are 73 distinct stations who are ADA-compliant.

-   What proportion of station entrances / exits without vending allow
    entrance?

``` r
NYC_transit %>% 
  select(vending, entry) %>% 
  filter(entry == "YES", vending == "NO")

NYC_transit %>% 
  select(vending, entry) %>% 
  filter(vending == "NO")
```

69 station entrances do not have vending and allow entrance. 183 station
entrances do not have vending.

Ans: Proportion of station entrances / exits without vending allow
entrance is (69/183)\*100 = 37.70%.

I am reformating data so that route number and route name are distinct
variables.

-   How many distinct stations serve the A train? Of the stations that
    serve the A train, how many are ADA compliant?

## Problem 2

``` r
# read and clean the Mr Trash Wheel dataset from the excel file

Mr_Trash_df <- read_excel("./data/Trash Wheel Collection Data.xlsx", 
  sheet="Mr. Trash Wheel", 
  range = "A2:N549",
  skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
   mutate(
    sports_balls = as.integer(sports_balls),
    year = as.numeric(year)) %>% 
   add_column(name = "Mr. Trash Wheel")


skimr::skim(Mr_Trash_df)
```

|                                                  |             |
|:-------------------------------------------------|:------------|
| Name                                             | Mr_Trash_df |
| Number of rows                                   | 547         |
| Number of columns                                | 15          |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_   |             |
| Column type frequency:                           |             |
| character                                        | 2           |
| numeric                                          | 12          |
| POSIXct                                          | 1           |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ |             |
| Group variables                                  | None        |

Data summary

**Variable type: character**

| skim_variable | n_missing | complete_rate | min | max | empty | n_unique | whitespace |
|:--------------|----------:|--------------:|----:|----:|------:|---------:|-----------:|
| month         |         0 |             1 |   3 |   9 |     0 |       13 |          0 |
| name          |         0 |             1 |  15 |  15 |     0 |        1 |          0 |

**Variable type: numeric**

| skim_variable      | n_missing | complete_rate |     mean |       sd |      p0 |     p25 |     p50 |      p75 |      p100 | hist  |
|:-------------------|----------:|--------------:|---------:|---------:|--------:|--------:|--------:|---------:|----------:|:------|
| dumpster           |         0 |          1.00 |   274.00 |   158.05 |    1.00 |  137.50 |  274.00 |   410.50 |    547.00 | ▇▇▇▇▇ |
| year               |         0 |          1.00 |  2017.97 |     2.37 | 2014.00 | 2016.00 | 2018.00 |  2020.00 |   2022.00 | ▇▆▆▇▆ |
| weight_tons        |         0 |          1.00 |     3.20 |     0.75 |    0.78 |    2.71 |    3.19 |     3.72 |      5.62 | ▁▃▇▅▁ |
| volume_cubic_yards |         0 |          1.00 |    15.33 |     1.38 |    7.00 |   15.00 |   15.00 |    15.00 |     20.00 | ▁▁▁▇▂ |
| plastic_bottles    |         0 |          1.00 |  1958.49 |  1063.82 |  210.00 |  980.00 | 1880.00 |  2740.00 |   5960.00 | ▇▇▅▁▁ |
| polystyrene        |         0 |          1.00 |  1649.08 |  1218.77 |   48.00 |  695.00 | 1250.00 |  2480.00 |   6540.00 | ▇▅▃▁▁ |
| cigarette_butts    |         0 |          1.00 | 20925.08 | 30215.86 |  900.00 | 4000.00 | 7000.00 | 26500.00 | 310000.00 | ▇▁▁▁▁ |
| glass_bottles      |         0 |          1.00 |    21.65 |    16.40 |    0.00 |   10.00 |   18.00 |    31.00 |    110.00 | ▇▃▁▁▁ |
| grocery_bags       |         0 |          1.00 |   965.53 |   844.77 |   24.00 |  330.00 |  680.00 |  1370.00 |   3750.00 | ▇▃▂▁▁ |
| chip_bags          |         0 |          1.00 |  1418.59 |   921.99 |  180.00 |  740.00 | 1100.00 |  1980.00 |   5085.00 | ▇▃▂▁▁ |
| sports_balls       |         0 |          1.00 |    12.56 |     9.28 |    0.00 |    6.00 |   11.00 |    18.00 |     56.00 | ▇▅▂▁▁ |
| homes_powered      |        61 |          0.89 |    45.98 |    21.42 |    0.00 |   39.54 |   51.17 |    59.13 |     93.67 | ▂▂▇▆▁ |

**Variable type: POSIXct**

| skim_variable | n_missing | complete_rate | min        | max        | median     | n_unique |
|:--------------|----------:|--------------:|:-----------|:-----------|:-----------|---------:|
| date          |         0 |             1 | 1900-01-20 | 2022-07-29 | 2018-07-18 |      331 |

I ensured the use of reasonable variable names. I have ommited rows that
do not include dumpster-specific data. I have rounded the number of
sports balls to the nearest integer and converted the result to an
integer variable.
