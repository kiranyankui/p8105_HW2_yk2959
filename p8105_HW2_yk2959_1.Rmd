---
title: "P8105 Homework 2"
author: "Kiran Kui"
date: "`r Sys.Date()`"
output: github_document
---

## Load Libraries 

```{r setup}

library(tidyverse)
library(readxl)
```

e want to read and clean the NYC transit dataset from the csv file. 

```{r Read/Clean Transit data, eval = FALSE}
NYC_transit <- read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names()

skimr::skim(NYC_transit)
```

Now, we want to retain the following variables:

* line
* station name
* station latitude / longitude
* routes served
* entry
* vending
* entrance type
* ADA compliance 

```{r retain variables, eval = FALSE}
select(NYC_transit, line, station_name, station_latitude, station_longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entry, vending, entrance_type, ada)

NYC_transit
```


Converting the entry variable into a logical vector. 
```{r converting to logical vector, eval = FALSE}

recode(NYC_transit$entry, "YES"=TRUE,"NO"=FALSE, .default = NA)

NYC_transit
```

## Description about the NYC_transit dataset

1. The dataset contains 32 columns (variables) and 1868 rows  (observations). 

2. The variables from the dataset contains line, station_name, station_latitude, station_longitude, routes1 to 11, entry, vending, entrance_type, ada

division, line, station_name, routes, entrance type, entry, exit only, vending, staffing, staff hours, ADA notes, north south street, east west street, corner, station location, entrance location, ada, free crossover, station lattitude and longitude, and entrance lattitude and longitude. 

3. I read and clean object names using clean names () in janitor; retain line, station, name, station latitude / longitude, routes served, entry, vending, entrance type, and ADA compliance. Convert the entry variable from character (YES vs NO) to a logical variable

4. The data are tidy. 

Answer the following questions using these data:

* How many distinct stations are there? Note that stations are identified both by name and by line (e.g. 125th St 8th Avenue; 125st Broadway; 125st Lenox); the distinct function may be useful here.

```{r distinct stations, eval = FALSE}
nrow(distinct(NYC_transit, station_name))
```
Ans: There are 356 distinct stations. 

* How many stations are ADA compliant?

```{r distinct stations who are ada-compliant, eval = FALSE}
NYC_transit %>% 
  select(station_name, ada) %>% 
  filter(ada == TRUE) %>%
  distinct(station_name)

```

Ans: There are 73 distinct stations who are ADA-compliant. 

* What proportion of station entrances / exits without vending allow entrance?

```{r proportion of stations without vending allow entrance, eval = FALSE}
NYC_transit %>% 
  select(vending, entry) %>% 
  filter(entry == "YES", vending == "NO")

NYC_transit %>% 
  select(vending, entry) %>% 
  filter(vending == "NO")
```

69 station entrances do not have vending and allow entrance.
183 station entrances do not have vending. 

Ans: Proportion of station entrances / exits without vending allow entrance is (69/183)*100 = 37.70%. 

I am reformating data so that route number and route name are distinct variables. 

* How many distinct stations serve the A train? Of the stations that serve the A train, how many are ADA compliant?


## Problem 2    

```{r }

# read and clean the Mr Trash Wheel dataset from the excel file

Mr_Trash_df <- read_excel("./data/Trash Wheel Collection Data.xlsx", 
  sheet="Mr. Trash Wheel", 
  range = "A2:N549",
  skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
   mutate(
    sports_balls = as.integer(sports_balls),
    year = as.numeric(year)) %>% 
   add_column(name = "Mr. Trash Wheel")


skimr::skim(Mr_Trash_df)
  
```

I ensured the use of reasonable variable names. 
I have ommited rows that do not include dumpster-specific data. 
I have rounded the number of sports balls to the nearest integer and converted the result to an integer variable. 


```{r }
# read and clean the Professor Trash Wheel dataset from the excel file

Pf_Trash_df <- read_excel("./data/Trash Wheel Collection Data.xlsx", 
  sheet = "Professor Trash Wheel",
  range = "A2:M96",
  skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  add_column(name = "Professor Trash Wheel") 

skimr::skim(Pf_Trash_df)

```
